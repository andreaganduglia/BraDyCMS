<div id="{{ uid }}">
	<h2>{{ tr.get('galleries') }}</h2>
	
	<div class="btn-group" style="padding:20px 0;">
		<a class="btn add_new" href="#" title="{{ tr.get('new_gallery') }}"><i class="icon-plus"></i> {{ tr.get('new_gallery') }}</a>
		<a class="btn reload" onclick="admin.tabs.reloadActive();" title="{{ tr.get('reload') }}"><i class="icon-repeat"></i> {{ tr.get('reload') }}</a>
	</div>
	
	<ul class="media-list" id="media-{{ uniqid }}">
		
	{% for gal in galleries %}
		<li class="pull-left img">
			<a class="" href="#galleries/edit/{{ gal }}">
				<img class="media-object" src="./img/video_movie_track.png" style="width:128px;" />
				<div style="text-align:center;">{{ gal }}</div>
			</a>
		</li>
	{% endfor %}
	
	</ul>

</div>

<script>
	$('#{{ uid }} a.add_new').on('click', function(event){
		admin.dialog({
			html: '<input type="text" class="gal" placeholder="' + admin.tr('gallery_name') + '" />'
				+ '<p class="text-error">' + admin.tr('gal_name_formatting') + '</p>',
			title: admin.tr('new_gallery'),
			loaded: function(modal){
				modal.find('input.gal').focus();
			},
			buttons:[
			         {
			        	 text: admin.tr('save'),
			        	 addclass: 'btn-success',
			        	 click: function(){
			        		 var gal = $('.modal input.gal').val();
			        		 if (!gal){
			        			 admin.message(admin.tr('gallery_name_cannot_be_empty'), 'error');
			        		 } else {
			        			 $.get('controller.php?obj=galleries_ctrl&method=addGallery&param[]=' + gal, function(data){
			        				 admin.message(data.text, data.status);
			        				 
			        				 if (data.status == 'success'){
			        					 window.location = '#galleries/edit/' + gal;
			        					 
			        					 $('#modal').modal('hide');
			        				 }
			        			 }, 'json');
			        		 }
			        	 }
			         },
			         {
				         text: admin.tr('close'),
				         action: 'close'
			         }
			         ]
		});
		event.preventDefault();
	});
</script>